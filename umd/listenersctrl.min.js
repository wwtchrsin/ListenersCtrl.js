!function(e,t){if("function"==typeof define&&define.amd)define([],t);else if("object"==typeof module&&module.exports)module.exports=t();else{var n=t();for(var s in n)e[s]=n[s]}}(this,function(){"use strict";var o,i,c,r,s,d,a,u={ListenersCtrl:(i=["addEventListener","removeEventListener"],c=function(e,t,n,s){n.List[t][3]!==e&&(null===e&&(e=n.List[t][3]),n.Elem[i[e?0:1]](n.List[t][0],n.List[t][1],n.List[t][2]),s||(n.List[t][3]=e))},s={Prepend:(r={PrependCore$:function(e,t,n,s,i){n=!!n,s=void 0!==s?s:null;var r=v(!0,!0,i.List,e,t,n)[0];void 0!==r&&(null===s&&(s=i.List[r][4]),i.List.splice(r,1)),i.List.unshift([e,t,n,!0,s])},Append$:function(e,t,n,s,i){n=!!n,s=void 0!==s?s:null;var r=v(!0,!0,i.List,e,t,n)[0];void 0!==r&&(null===s&&(s=i.List[r][4]),c(!1,r,i),i.List.splice(r,1));var o=i.List.push([e,t,n,!1,s])-1;return c(!0,o,i),o},Associate$:function(e,t,n,s){n=!!n;var i=v(!0,!0,s.List,e,t,n)[0];return i||s.List.push([e,t,n,!1,null])-1},Invoke$:function(e,t,n){for(var s=e&&e.constructor===Array?"apply":"call",i=0;i<n.LastIndices.length;i++){var r=n.LastIndices[i];t&&!n.List[r][3]||n.List[r][1][s](n.Elem,e)}},Connect$:function(e,t){for(var n=0;n<t.LastIndices.length;n++){var s=t.LastIndices[n];c(e,s,t)}},Select$:function(e,t,n){var s=t&&t.type,i=t&&t.useCapture,r=t&&t.connected,o=t&&t.listener;n.LastIndices=v(!1,!0,n.List,s,o,i,r,e)},Prepend:function(e,t,n){for(var s=this.Instance,i=0;i<s.List.length;i++)c(!1,i,s,!0);r.PrependCore$(e,t,n,void 0,s);for(i=0;i<s.List.length;i++)c(null,i,s);return s.LastIndices=[0],s.MethodLists.Extended},PrependArray:function(e){for(var t=this.Instance,n=0;n<t.List.length;n++)c(!1,n,t,!0);t.LastIndices=[];for(n=e.length-1;0<=n;n--)r.PrependCore$(e[n][0],e[n][1],e[n][2],e[n][4],t),t.LastIndices.push(e.length-1-n);for(n=0;n<t.List.length;n++)c(null,n,t);return t.MethodLists.Extended},Append:function(e,t,n){var s=this.Instance;return s.LastIndices=[r.Append$(e,t,n,void 0,s)],s.MethodLists.Extended},AppendArray:function(e){var t=this.Instance;t.LastIndices=[];for(var n=0;n<e.length;n++)t.LastIndices.push(r.Append$(e[n][0],e[n][1],e[n][2],e[n][4],t));return t.MethodLists.Extended},Apply:function(e,t,n){n=!!n;for(var s=this.Instance,i=0;i<s.List.length;i++)c(!1,i,s);return s.Elem.addEventListener(e,t,n),s.List=[[e,t,n,!0,null]],s.LastIndices=[0],s.MethodLists.Extended},ApplyArray:function(e){for(var t=this.Instance,n=0;n<t.List.length;n++)c(!1,n,t,!0);t.List=[],t.LastIndices=[];for(n=0;n<e.length;n++){var s=!!e[n][2],i=!(!1===e[n][3]),r=void 0!==e[n][4]?e[n][4]:null;i&&t.Elem.addEventListener(e[n][0],e[n][1],s),t.LastIndices.push(t.List.push([e[n][0],e[n][1],s,i,r])-1)}return t.MethodLists.Extended},Associate:function(e,t,n){var s=this.Instance;return s.LastIndices=[r.Associate$(e,t,n,s)],s.MethodLists.Extended},AssociateArray:function(e){var t=this.Instance;t.LastIndices=[];for(var n=0;n<e.length;n++)t.LastIndices.push(r.Associate$(e[n][0],e[n][1],e[n][2],t));return t.MethodLists.Extended},Invoke:function(e,t,n){var s=this.Instance;return r.Select$(t,n,s),r.Invoke$(e,!1,s),s.MethodLists.Extended},InvokeConn:function(e,t,n){var s=this.Instance;return r.Select$(t,n,s),r.Invoke$(e,!0,s),s.MethodLists.Extended},Disconn:function(e,t){var n=this.Instance;return r.Select$(e,t,n),r.Connect$(!1,n),n.MethodLists.Extended},Connect:function(e,t){var n=this.Instance;return r.Select$(e,t,n),r.Connect$(!0,n),n.MethodLists.Extended},IsAssociated:function(e,t,n){n=!!n;var s=this.Instance;return void 0!==v(!0,!0,s.List,e,t,n)[0]},IsConnected:function(e,t,n){n=!!n;var s=this.Instance;return void 0!==v(!0,!0,s.List,e,t,n,!0)[0]},Count:function(){return this.Instance.List.length},CountConn:function(){return v(!0,!0,this.Instance.List,void 0,void 0,void 0,!0).length},Select:function(e,t){var n=this.Instance;return r.Select$(e,t,n),n.MethodLists.Selector},Remove:function(e,t,n){n=!!n;var s=this.Instance,i=v(!0,!0,s.List,e,t,n)[0];return void 0===i||(c(!1,i,s),s.List.splice(i,1)),s.MethodLists.Main},Clear:function(){for(var e=this.Instance,t=0;t<e.List.length;t++)c(!1,t,e);return e.List=[],e.MethodLists.Main},As:function(e){for(var t=this.Instance,n=0;n<t.LastIndices.length;n++){var s=t.LastIndices[n];t.List[s][4]=e}return t.MethodLists.Main},PrependSelected:function(){for(var e=this.Instance,t=0;t<e.List.length;t++)c(!1,t,e,!0);var n=[];e.LastIndices.sort().reverse();for(t=0;t<e.LastIndices.length;t++){var s=e.LastIndices[t]+t;r.PrependCore$(e.List[s][0],e.List[s][1],e.List[s][2],e.List[s][4],e),n.push(t)}for(t=0;t<e.List.length;t++)c(null,t,e);return e.LastIndices=n,e.MethodLists.Extended},AppendSelected:function(){var e=this.Instance,t=[];e.LastIndices.sort();for(var n=0;n<e.LastIndices.length;n++){var s=e.LastIndices[n]-n;t.push(r.Append$(e.List[s][0],e.List[s][1],e.List[s][2],e.List[s][4],e))}return e.LastIndices=t,e.MethodLists.Extended},ApplySelected:function(){for(var e=this.Instance,t=0;t<e.List.length;t++)c(!1,t,e);var n=[],s=[];for(t=0;t<e.LastIndices.length;t++){var i=e.LastIndices[t];c(!0,i,e),s.push(n.push(e.List[i])-1)}return e.List=n,e.LastIndices=s,e.MethodLists.Extended},InvokeSelected:function(e){var t=this.Instance;return r.Invoke$(e,!1,t),t.MethodLists.Extended},InvokeConnSelected:function(e){var t=this.Instance;return r.Invoke$(e,!0,t),t.MethodLists.Extended},DisconnSelected:function(){var e=this.Instance;return r.Connect$(!1,e),e.MethodLists.Extended},ConnectSelected:function(){var e=this.Instance;return r.Connect$(!0,e),e.MethodLists.Extended},CountSelected:function(){return this.Instance.LastIndices.length},CountConnSelected:function(){for(var e=this.Instance,t=0,n=0;n<e.LastIndices.length;n++){var s=e.LastIndices[n];e.List[s][3]&&t++}return t},RemoveSelected:function(){var e=this.Instance;e.LastIndices.sort();for(var t=0,n=0;n<e.LastIndices.length;n++){var s=e.LastIndices[n]-t++;c(!1,s,e),e.List.splice(s,1)}return e.MethodLists.Main},GetElement:function(){return this.Instance.Elem}}).Prepend,PrependArray:r.PrependArray,Append:r.Append,AppendArray:r.AppendArray,Apply:r.Apply,ApplyArray:r.ApplyArray,Associate:r.Associate,AssociateArray:r.AssociateArray,Invoke:r.Invoke,InvokeConn:r.InvokeConn,Disconn:r.Disconn,Connect:r.Connect,IsAssociated:r.IsAssociated,IsConnected:r.IsConnected,Count:r.Count,CountConn:r.CountConn,Select:r.Select,Remove:r.Remove,Clear:r.Clear,GetElement:r.GetElement},d={Prepend:r.PrependSelected,Append:r.AppendSelected,Apply:r.ApplySelected,Invoke:r.InvokeSelected,InvokeConn:r.InvokeConnSelected,Disconn:r.DisconnSelected,Connect:r.ConnectSelected,Count:r.CountSelected,CountConn:r.CountConnSelected,Remove:r.RemoveSelected},a={As:r.As},function(e){"string"==typeof e&&(e=document.querySelector(e));var t={Elem:e,List:[],LastIndices:[],MethodLists:{Main:{},Extended:{},Selector:{}}};for(var n in s)t.MethodLists.Main[n]=s[n],t.MethodLists.Extended[n]=s[n];for(var n in d)t.MethodLists.Selector[n]=d[n];for(var n in a)t.MethodLists.Extended[n]=a[n],t.MethodLists.Selector[n]=a[n];return((((t.Instance=t).MethodLists.Main.Instance=t).MethodLists.Extended.Instance=t).MethodLists.Selector.Instance=t).MethodLists.Main}),ListenersAggt:(o=[],{Element:function(e,t){"string"==typeof e&&(e=document.querySelector(e));var n,s,i,r=l(e);return r<0?(n=e,s=t,i=u.ListenersCtrl(n),r=o.push({Element:n,Marker:void 0!==s?s:null,Instance:i.Instance})-1):void 0!==t&&(o[r].Marker=t),o[r].Instance.MethodLists.Main},Alias:function(e){var t=l(e);return t<0?null:o[t].Instance.MethodLists.Main},Release:function(e){if(void 0===e){var t=o;return o=[],t}"string"==typeof e&&(e=document.querySelector(e));var n=L(e);return n&&n.MethodLists.Main},ReleaseByAlias:function(e){var t=L(e);return t&&t.MethodLists.Main},Clear:function(e){if(void 0===e){for(var t=0;t<o.length;t++)o[t].Instance.Clear();return o=[],this}"string"==typeof e&&(e=document.querySelector(e));var n=L(e);return n&&n.MethodLists.Main.Clear()},ClearByAlias:function(e){var t=L(e);return t&&t.MethodLists.Main.Clear()}})};function l(e){for(var t=0;t<o.length;t++)if(o[t].Element===e||o[t].Marker===e)return t;return-1}function L(e){for(var t=0;t<o.length;t++)if(o[t].Element===e||o[t].Marker===e){var n=o[t].Instance;return o.splice(t--,1),n}}function v(e,t,n,s,i,r,o,c){for(var d=void 0===s||!e&&null===s,a=void 0===i||!e&&null===i,u=void 0===r||!e&&null===r,l=void 0===o||!e&&null===o,L=void 0===c||!e&&null===c,v=[],h=0;h<n.length;h++)!d&&n[h][0]!==s||!a&&n[h][1]!==i||!u&&n[h][2]!==r||!l&&n[h][3]!==o||!L&&n[h][4]!==c||(t?v.push(h):v.push(n[h]));return v}return u});